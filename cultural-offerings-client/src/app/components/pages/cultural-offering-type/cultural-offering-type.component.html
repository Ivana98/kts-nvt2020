<div class="container">
	<div class="m-5 mat-elevation-z8">
		<div 
			*ngIf="isLoading || fetchFailure"
			class="example-loading-shade"
		>
			<mat-spinner
				*ngIf="isLoading">
			</mat-spinner>
			<div 
				*ngIf="fetchFailure"
				class="example-fetch-failure"
			>
				Failed to fetch data from the API
			</div>
		</div>

		<div class="mx-3">
			<table
				mat-table
				[dataSource]="culturalOfferingTypes"
				matSort
				matSortActive="id"
				matSortDirection="desc"
				matSortDisableClear
				multiTemplateDataRows
				class="mr-3"
			>
				<ng-container matColumnDef="{{column.field}}" *ngFor="let column of displayedColumns">
					<ng-container *ngIf="column.field!='Actions'">
						<th mat-header-cell *matHeaderCellDef mat-sort-header>{{column.text}}</th>
						<td 
							mat-cell
							*matCellDef="let element" 
						>{{element[column.field]}}</td>
					</ng-container>
					<ng-container *ngIf="column.field=='Actions'">
						<th mat-header-cell *matHeaderCellDef class="align-right">{{column.text}}</th>
						<td
							mat-cell
							*matCellDef="let element"
							class="align-right"
						>
							<mat-icon 
								class="expand-icon"
								(click)="toggleRow(element)"
							>
								<ng-container
									*ngIf="expandedItem.value!=element"
								>chevron_left</ng-container>
								<ng-container
									*ngIf="expandedItem.value==element"
								>expand_more</ng-container>
							</mat-icon>
						</td>
					</ng-container>
				</ng-container>
			
				<ng-container matColumnDef="expandedDetail">
					<td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
						<div 
							class="example-element-detail"
							[@detailExpand]="element == expandedItem.value ? 'expanded' : 'collapsed'"
						>
							<app-cultrual-offering-type-details
								*ngIf="element == expandedItem.value"
								[culturalOfferingType]="element"
								style="width: 100%;"
							></app-cultrual-offering-type-details>
						</div>
					</td>
				</ng-container>
			
				<tr mat-header-row *matHeaderRowDef="getHeadersField()"></tr>
				<tr
					mat-row
					*matRowDef="let row; columns: getHeadersField();"
					class="example-element-row"
					[class.example-expanded-row]="expandedItem.value == element"
				></tr>
				<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
			</table>
		</div>
		<mat-paginator [length]="totalLength" [pageSizeOptions]="[3,5,10,20]"></mat-paginator>
	</div>
</div>